{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\f7404\\\\Desktop\\\\react-store\\\\src\\\\pages\\\\Login.js\";\nimport React from \"react\";\nimport axios from \"commons/axios\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"react-toastify\";\nexport default function Login(props) {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm(); // initialise the hook\n  // 有 被useForm 的 register 註冊過的標籤.value 都會被包在data傳遞進來\n\n  const onSubmit = async data => {\n    // 2. 獲取表單數據\n    // 3. 處理登入邏輯\n    try {\n      const {\n        email,\n        password\n      } = data; // 等待 json server 的 post 端口驗證 email 與 password 後, 回傳一組 Token\n\n      const res = await axios.post(\"/auth/login\", {\n        email,\n        password\n      });\n      const jwToken = res.data;\n      console.log(jwToken);\n      global.auth.setToken(jwToken); // 登入成功後 將 Token 存到 localStorage\n\n      toast.success(\"Login Successed\"); // 4.跳轉到首頁視圖\n\n      props.history.push(\"/\");\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"login-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"box login-box\",\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"title has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"label\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"div\", {\n    className: \"control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: `input ${errors.email && \"is-danger\"}`,\n    type: \"text\",\n    placeholder: \"Email\" // 將 name 的值, 設定與 State 的屬性名稱相同, 才好動態命名\n    ,\n    name: \"email\" // React-Hook-Form 套件解構的元件: register, handleSubmit, errors\n    // 標籤 register 後可設置許多屬性, 如 required, pattern ...\n    ,\n    ref: register({\n      required: {\n        // 不可為空\n        message: \"email is required\"\n      },\n      pattern: {\n        // 限制條件\n        value: /^([A-Za-z0-9])+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\n        message: \"invalid email\"\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }), errors.email && React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, errors.email.message))), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"div\", {\n    className: \"control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: `input ${errors.password && \"is-danger\"}`,\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"password\",\n    ref: register({\n      required: {\n        // 不可為空\n        message: \"password is required\"\n      },\n      minLength: {\n        // 最小長度\n        value: 6,\n        message: \"cannt be less than 6 digitals\"\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), errors.password && React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, errors.password.message))), React.createElement(\"div\", {\n    className: \"control\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"button is-fullwidth is-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Login\"))));\n}","map":{"version":3,"sources":["C:/Users/f7404/Desktop/react-store/src/pages/Login.js"],"names":["React","axios","useForm","toast","Login","props","register","handleSubmit","errors","onSubmit","data","email","password","res","post","jwToken","console","log","global","auth","setToken","success","history","push","error","message","response","required","pattern","value","minLength"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"commons/axios\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Login(props) {\r\n  const { register, handleSubmit, errors } = useForm(); // initialise the hook\r\n\r\n  // 有 被useForm 的 register 註冊過的標籤.value 都會被包在data傳遞進來\r\n  const onSubmit = async data => {\r\n    // 2. 獲取表單數據\r\n    // 3. 處理登入邏輯\r\n    try {\r\n      const { email, password } = data;\r\n      // 等待 json server 的 post 端口驗證 email 與 password 後, 回傳一組 Token\r\n      const res = await axios.post(\"/auth/login\", { email, password });\r\n      const jwToken = res.data;\r\n      console.log(jwToken);\r\n      global.auth.setToken(jwToken); // 登入成功後 將 Token 存到 localStorage\r\n      toast.success(\"Login Successed\");\r\n      // 4.跳轉到首頁視圖\r\n      props.history.push(\"/\");\r\n    } catch (error) {\r\n      const message = error.response.data.message;\r\n      toast.error(message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-wrapper\">\r\n      <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\r\n        <div className=\"field\">\r\n          <p className=\"title has-text-centered\">Login</p>\r\n          <label className=\"label\">Email</label>\r\n          <div className=\"control\">\r\n            <input\r\n              className={`input ${errors.email && \"is-danger\"}`}\r\n              type=\"text\"\r\n              placeholder=\"Email\"\r\n              // 將 name 的值, 設定與 State 的屬性名稱相同, 才好動態命名\r\n              name=\"email\"\r\n              // React-Hook-Form 套件解構的元件: register, handleSubmit, errors\r\n              // 標籤 register 後可設置許多屬性, 如 required, pattern ...\r\n              ref={register({\r\n                required: {\r\n                  // 不可為空\r\n                  message: \"email is required\"\r\n                },\r\n                pattern: {\r\n                  // 限制條件\r\n                  value: /^([A-Za-z0-9])+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\r\n                  message: \"invalid email\"\r\n                }\r\n              })}\r\n            />\r\n            {errors.email && (\r\n              <p className=\"helper has-text-danger\">{errors.email.message}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"field\">\r\n          <label className=\"label\">Password</label>\r\n          <div className=\"control\">\r\n            <input\r\n              className={`input ${errors.password && \"is-danger\"}`}\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              name=\"password\"\r\n              ref={register({\r\n                required: {\r\n                  // 不可為空\r\n                  message: \"password is required\"\r\n                },\r\n                minLength: {\r\n                  // 最小長度\r\n                  value: 6,\r\n                  message: \"cannt be less than 6 digitals\"\r\n                }\r\n              })}\r\n            />\r\n            {errors.password && (\r\n              <p className=\"helper has-text-danger\">\r\n                {errors.password.message}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"control\">\r\n          <button className=\"button is-fullwidth is-primary\">Login</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}